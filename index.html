<html>

<head>
    <title>Interactive Hiera Demo</title>
    <link rel="stylesheet" href="http:///code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="atelier-cave-light.css">
    <link rel="stylesheet" type="text/css" href="styles.css">

    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

    <script src="highlight.pack.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>

    <script src="http://yamltojson.com/js/yaml.js"></script>
    <script type="text/javascript" src="scripts.js"></script>

</head>

<body>
    <h2>Interactive Hiera Demo</h2>
    
    <aside class="float-left">
        <div>
            <label for="key">Lookup key:</label>
            <input id="key" type="text" name="key">
            <input id="lookup" type="submit" value="Lookup">
        </div>
        <br>
        <div id="facts">Facts
            <ul>
                <li>
                    <label for="clientcert">clientcert</label>
                    <input type="text" id="clientcert" name="clientcert" value="web01.example.com">
                </li>
                <li>
                    <label for="role">role</label>
                    <input type="text" id="role" name="role" value="webserver">
                </li>
                <li>
                    <label for="datacenter">datacenter</label>
                    <input type="text" id="datacenter" name="datacenter" value="houston">
                </li>
                <li>
                    <label for="environment">environment</label>
                    <input type="text" id="environment" name="environment" value="production">
                </li>
            </ul>
        </div>
        
        <div id="result"></div>
    </aside>
    
    <section class="float-right">    
    <div class="hiera">
      <h3><code>hiera.yaml</code></h3>
      <input type="button" id="update" class="float-right" value="Interpolate Facts" />    
        
      <pre><code class="yaml">---
:backends:
  - yaml

:hierarchy:
  - <span id="level1" class="level">"nodes/<span class="replace clientcert" title="%{clientcert}">%{clientcert}</span>"</span>
  - <span id="level2" class="level">"<span class="replace datacenter" title="%{datacenter}">%{datacenter}</span>/<span class="replace role" title="%{role}">%{role}</span>"</span>
  - <span id="level3" class="level">"<span class="replace role" title="%{role}">%{role}</span>"</span>
  - <span id="level4" class="level">"<span class="replace datacenter" title="%{datacenter}">%{datacenter}</span>"</span>
  - <span id="level5" class="level">common</span>

:yaml:
  :datadir: "/etc/puppetlabs/code/environments/<span class="replace environment" title="%{environment}">%{environment}</span>/hieradata"</code></pre>
    </div>

    <div class="datasources">
        <h3>Datasource Files</h3>
        <p>(rooted in <code>/etc/puppetlabs/code/environments</code>)</p>
        <ul>
            <li>
                <div class="path">development/hieradata/common<span class="ext">.yaml</span></div>
                <pre><code class="yaml">---
message: This is the development environment</code></pre>
            </li>
            <li>
                <div class="path">development/hieradata/nodes/lb.example.com<span class="ext">.yaml</span></div>
                <pre><code class="yaml">---
somekey: something</code></pre>
            </li>

            <li>
                <div class="path">production/hieradata/common<span class="ext">.yaml</span></div>
                <pre><code class="yaml">---
message: This is the production environment</code></pre>
            </li>
            <li>
                <div class="path">production/hieradata/nodes/lb.example.com<span class="ext">.yaml</span></div>
                <pre><code class="yaml">---
somekey: something in production</code></pre>
            </li>

            <li>
                <div class="path">production/hieradata/nodes/web01.example.com<span class="ext">.yaml</span></div>
                <pre><code class="yaml">---
proxyserver: lb.example.com</code></pre>
            </li>
            <li>
                <div class="path">production/hieradata/nodes/web02.example.com<span class="ext">.yaml</span></div>
                <pre><code class="yaml">---
blah: blah</code></pre>
            </li>

        </ul>

    </div>
    </section>
</body>

</html>